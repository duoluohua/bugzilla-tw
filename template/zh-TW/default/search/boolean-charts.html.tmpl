[%# The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla Bug Tracking System.
  #
  # The Initial Developer of the Original Code is Netscape Communications
  # Corporation. Portions created by Netscape are
  # Copyright (C) 1998 Netscape Communications Corporation. All
  # Rights Reserved.
  #
  # Contributor(s): Gervase Markham <gerv@gerv.net>
  #%]

[% fields = [
  { name => "noop", description => "---" } ,
  { name => "alias", description => "別名是" } ,
  { name => "assigned_to", description => "負責人" } ,
  { name => "attachments.submitter", description => "附件附加者" } ,
  { name => "attach_data.thedata", description => "附件資料" } ,
  { name => "attachments.description", description => "附件描述" } ,
  { name => "attachments.filename", description => "附件檔名" } ,
  { name => "attachments.isurl", description => "附件是網址" } ,
  { name => "attachments.isobsolete", description => "已廢棄的附件" } ,
  { name => "attachments.ispatch", description => "附件是patch" } ,
  { name => "attachments.isprivate", description => " 附件不公開 " } ,
  { name => "attachments.mimetype", description => "附件的 MIME 類別" } ,
  { name => "blocked", description => "會擋掉這些 $terms.bug" } ,
  { name => "bug_id", description => "$terms.Bug 編號" } ,
  { name => "cc", description => "寄件副本清單" } ,
  { name => "cclist_accessible", description => "可瀏覽的寄件副本清單" } ,
  { name => "classification", description => "分類" } ,
  { name => "longdesc", description => "子產品" } ,
  { name => "longdescs.isprivate", description => "意見不公開" } ,
  { name => "commenter", description => "提供意見者" } ,
  { name => "component", description => "子產品" } ,
  { name => "content", description => "內容" } ,
  { name => "creation_ts", description => "建立日期" } ,
  { name => "days_elapsed", description => "自前次變更 $terms.bug 後幾天" } ,
  { name => "deadline", description => "截止期限" } ,
  { name => "dependson", description => "要先修好這些 $terms.bug" } ,
  { name => "estimated_time", description => "估計時數" } ,
  { name => "everconfirmed", description => "是否已確認" } ,
  { name => "flagtypes.name", description => "旗標" } ,
  { name => "requestees.login_name", description => "被要求設定旗標者" } ,
  { name => "setters.login_name", description => "旗標設定者" } ,
  { name => "bug_group", description => "群組" } ,
  { name => "work_time", description => "已工作時數" } ,
  { name => "keywords", description => "關鍵字" } ,
  { name => "delta_ts", description => "最後變更日期" } ,
  { name => "op_sys", description => "作業系統／版本" } ,
  { name => "percentage_complete", description => "完成百分比" } ,
  { name => "rep_platform", description => "硬體平台" } ,
  { name => "priority", description => "優先程度" } ,
  { name => "product", description => "產品" } ,
  { name => "qa_contact", description => "QA 連絡人" } ,
  { name => "remaining_time", description => "剩餘時數" } ,
  { name => "reporter", description => "回報者" } ,
  { name => "reporter_accessible", description => "可瀏覽的回報者" } ,
  { name => "resolution", description => "解決方案" } ,
  { name => "bug_severity", description => "嚴重等級" } ,
  { name => "bug_status", description => "狀態" } ,
  { name => "status_whiteboard", description => "狀態白板" } ,
  { name => "short_desc", description => "摘要" } ,
  { name => "target_milestone", description => "目標里程碑" } ,
  { name => "owner_idle_time", description => "負責人開始處理後經過的時間" } ,
  { name => "bug_file_loc", description => "網址" } ,
  { name => "version", description => "版本" } ,
  { name => "votes", description => "票數" } ] %]

[% types = [
  { name => "noop", description => "---" },
  { name => "equals", description => "等於" },
  { name => "notequals", description => "不等於" },
  { name => "anyexact", description => "等於任何一個字串" },
  { name => "substring", description => "包含該字串" },
  { name => "casesubstring", description => "包含該字串 (大小寫符合)" },
  { name => "notsubstring", description => "不包含該字串" },
  { name => "anywordssubstr", description => "包含任一字串" },
  { name => "allwordssubstr", description => "包含所有字串" },
  { name => "nowordssubstr", description => "不包含任一字串" },
  { name => "regexp", description => "包含正規表達式" },
  { name => "notregexp", description => "不包含正規表達式" },
  { name => "lessthan", description => "小於" },
  { name => "greaterthan", description => "大於" },
  { name => "anywords", description => "包含任何一個字" },
  { name => "allwords", description => "包含所有字" },
  { name => "nowords", description => "不包含任何字" },
  { name => "changedbefore", description => "在...之前被變更" },
  { name => "changedafter", description => "在...之後被變更" },
  { name => "changedfrom", description => "從...變更" },
  { name => "changedto", description => "變更為..." },
  { name => "changedby", description => "被...變更" },
  { name => "matches", description => "符合" } ] %]

  <p>
    <strong>
      <a name="chart">使用布林運算式進階搜尋</a>：
    </strong>
  </p>

[%# Whoever wrote the original version of boolean charts had a seriously twisted mind %]

[% jsmagic = "onclick=\"this.form.action='query.cgi#chart'; this.form.method='POST'; return 1;\"" %]

[% FOREACH chart = default.charts %]
  [% chartnum = loop.count - 1 %]
  <table>
    <tr>
      <td>
        <input type="checkbox" id="negate[% chartnum FILTER html %]"
             name="negate[% chartnum FILTER html %]" value="1"
            [%+ "checked" IF chart.negate %]>
        <label for="negate[% chartnum FILTER html %]">
          <b>非</b> (將會否定這整個表)
        </label>
      </td>
    </tr>
  [% FOREACH row = chart.rows %]
    [% rownum = loop.count - 1 %]
    <tr>
    [% FOREACH col = row %]
      [% colnum = loop.count - 1 %]
      <td>
        <select name="[% "field${chartnum}-${rownum}-${colnum}" %]">
          [% FOREACH field = fields %]
            <option value="[% field.name %]" [% "selected" IF field.name == col.field %]>
             [% field_descs.${field.name} || field.description FILTER html %]
           </option>
          [% END %]
        </select>

        <select name="[% "type${chartnum}-${rownum}-${colnum}" %]">
          [% FOREACH type = types %]
            <option value="[% type.name %]"
              [%- " selected" IF type.name == col.type %]>[% type.description %]</option>
          [% END %]
        </select>

        <input name="[% "value${chartnum}-${rownum}-${colnum}" %]"
               value="[% col.value FILTER html %]">
      </td>

      [% UNLESS loop.last %]
        <td align="center">
          或
        </td>
      </tr>
      <tr>
      [% ELSE %]
        <td>
          [% newor = colnum + 1 %]
          <input type="submit" value="或" [% jsmagic %]
                 name="cmd-add[% "${chartnum}-${rownum}-${newor}" %]"
                 id="cmd-add[% "${chartnum}-${rownum}-${newor}" %]">
        </td>
      [% END %]

    [% END %]
    </tr>

    [% UNLESS loop.last %]
    <tr>
      <td>且</td>
    </tr>
    [% ELSE %]
    <tr>
      <td>
        [% newand = rownum + 1; newchart = chartnum + 1 %]
        <input type="submit" value="且" [% jsmagic %]
               name="cmd-add[% "${chartnum}-${newand}-0" %]"
               id="cmd-add[% "${chartnum}-${newand}-0" %]">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="submit" value="加入另一個布林運算式" [% jsmagic %]
               name="cmd-add[% newchart %]-0-0"
               id="cmd-add[% newchart %]-0-0">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      </td>
    </tr>
    [% END %]

  [% END %]
  </table>
  <hr>
[% END %]
